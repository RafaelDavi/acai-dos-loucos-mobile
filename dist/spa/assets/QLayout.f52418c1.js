import{p as O,w as E,o as N,x as A,y as B,g as Q,z as D,r as w,A as U,c as u,B as z,u as V,a as X,h as v,t as Y}from"./index.6b2a4ffc.js";import{g as j,c as q}from"./dom.e7d511d8.js";import{Q as R}from"./QResizeObserver.e530f692.js";import{a as I}from"./render.38afe27e.js";const K=[Element,String],_=[null,document,document.body,document.scrollingElement,document.documentElement];function k(e,i){let o=j(i);if(o===void 0){if(e==null)return window;o=e.closest(".scroll,.scroll-y,.overflow-auto")}return _.includes(o)?window:o}function G(e){return e===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:e.scrollTop}function J(e){return e===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:e.scrollLeft}let T;function C(){if(T!==void 0)return T;const e=document.createElement("p"),i=document.createElement("div");q(e,{width:"100%",height:"200px"}),q(i,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),i.appendChild(e),document.body.appendChild(i);const o=e.offsetWidth;i.style.overflow="scroll";let n=e.offsetWidth;return o===n&&(n=i.clientWidth),i.remove(),T=o-n,T}function ie(e,i=!0){return!e||e.nodeType!==Node.ELEMENT_NODE?!1:i?e.scrollHeight>e.clientHeight&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-y"])):e.scrollWidth>e.clientWidth&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-x"]))}const{passive:$}=D,Z=["both","horizontal","vertical"];var ee=O({name:"QScrollObserver",props:{axis:{type:String,validator:e=>Z.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:K},emits:["scroll"],setup(e,{emit:i}){const o={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let n=null,s,d;E(()=>e.scrollTarget,()=>{f(),p()});function c(){n!==null&&n();const m=Math.max(0,G(s)),g=J(s),a={top:m-o.position.top,left:g-o.position.left};if(e.axis==="vertical"&&a.top===0||e.axis==="horizontal"&&a.left===0)return;const S=Math.abs(a.top)>=Math.abs(a.left)?a.top<0?"up":"down":a.left<0?"left":"right";o.position={top:m,left:g},o.directionChanged=o.direction!==S,o.delta=a,o.directionChanged===!0&&(o.direction=S,o.inflectionPoint=o.position),i("scroll",{...o})}function p(){s=k(d,e.scrollTarget),s.addEventListener("scroll",r,$),r(!0)}function f(){s!==void 0&&(s.removeEventListener("scroll",r,$),s=void 0)}function r(m){if(m===!0||e.debounce===0||e.debounce==="0")c();else if(n===null){const[g,a]=e.debounce?[setTimeout(c,e.debounce),clearTimeout]:[requestAnimationFrame(c),cancelAnimationFrame];n=()=>{a(g),n=null}}}const{proxy:y}=Q();return E(()=>y.$q.lang.rtl,c),N(()=>{d=y.$el.parentNode,p()}),A(()=>{n!==null&&n(),f()}),Object.assign(y,{trigger:r,getPosition:()=>o}),B}}),re=O({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:i,emit:o}){const{proxy:{$q:n}}=Q(),s=w(null),d=w(n.screen.height),c=w(e.container===!0?0:n.screen.width),p=w({position:0,direction:"down",inflectionPoint:0}),f=w(0),r=w(U.value===!0?0:C()),y=u(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),m=u(()=>e.container===!1?{minHeight:n.screen.height+"px"}:null),g=u(()=>r.value!==0?{[n.lang.rtl===!0?"left":"right"]:`${r.value}px`}:null),a=u(()=>r.value!==0?{[n.lang.rtl===!0?"right":"left"]:0,[n.lang.rtl===!0?"left":"right"]:`-${r.value}px`,width:`calc(100% + ${r.value}px)`}:null);function S(t){if(e.container===!0||document.qScrollPrevented!==!0){const l={position:t.position.top,direction:t.direction,directionChanged:t.directionChanged,inflectionPoint:t.inflectionPoint.top,delta:t.delta.top};p.value=l,e.onScroll!==void 0&&o("scroll",l)}}function M(t){const{height:l,width:h}=t;let b=!1;d.value!==l&&(b=!0,d.value=l,e.onScrollHeight!==void 0&&o("scrollHeight",l),P()),c.value!==h&&(b=!0,c.value=h),b===!0&&e.onResize!==void 0&&o("resize",t)}function F({height:t}){f.value!==t&&(f.value=t,P())}function P(){if(e.container===!0){const t=d.value>f.value?C():0;r.value!==t&&(r.value=t)}}let x=null;const H={instances:{},view:u(()=>e.view),isContainer:u(()=>e.container),rootRef:s,height:d,containerHeight:f,scrollbarWidth:r,totalWidth:u(()=>c.value+r.value),rows:u(()=>{const t=e.view.toLowerCase().split(" ");return{top:t[0].split(""),middle:t[1].split(""),bottom:t[2].split("")}}),header:z({size:0,offset:0,space:!1}),right:z({size:300,offset:0,space:!1}),footer:z({size:0,offset:0,space:!1}),left:z({size:300,offset:0,space:!1}),scroll:p,animate(){x!==null?clearTimeout(x):document.body.classList.add("q-body--layout-animate"),x=setTimeout(()=>{x=null,document.body.classList.remove("q-body--layout-animate")},155)},update(t,l,h){H[t][l]=h}};if(V(Y,H),C()>0){let h=function(){t=null,l.classList.remove("hide-scrollbar")},b=function(){if(t===null){if(l.scrollHeight>n.screen.height)return;l.classList.add("hide-scrollbar")}else clearTimeout(t);t=setTimeout(h,300)},L=function(W){t!==null&&W==="remove"&&(clearTimeout(t),h()),window[`${W}EventListener`]("resize",b)},t=null;const l=document.body;E(()=>e.container!==!0?"add":"remove",L),e.container!==!0&&L("add"),X(()=>{L("remove")})}return()=>{const t=I(i.default,[v(ee,{onScroll:S}),v(R,{onResize:M})]),l=v("div",{class:y.value,style:m.value,ref:e.container===!0?void 0:s,tabindex:-1},t);return e.container===!0?v("div",{class:"q-layout-container overflow-hidden",ref:s},[v(R,{onResize:F}),v("div",{class:"absolute-full",style:g.value},[v("div",{class:"scroll",style:a.value},[l])])]):l}}});export{re as Q,k as a,J as b,G as c,C as g,ie as h,K as s};
