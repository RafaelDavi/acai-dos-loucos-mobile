import{d as G,e as b,v as N}from"./QBtn.f5a729ad.js";import{w as D,o as I,g as T,D as w,a4 as F,p as K,r as M,a as L,N as O,h as y,a5 as j,c as Q,Y as S,x as _,a1 as A,Q as B}from"./index.6b2a4ffc.js";import{d as q,e as W}from"./focus-manager.b2fb196f.js";const ie={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},se=["beforeShow","show","beforeHide","hide"];function ue({showing:e,canShow:t,hideOnRouteChange:n,handleShow:a,handleHide:l,processOnMount:c}){const r=T(),{props:i,emit:s,proxy:h}=r;let u;function v(o){e.value===!0?$(o):g(o)}function g(o){if(i.disable===!0||o!==void 0&&o.qAnchorHandled===!0||t!==void 0&&t(o)!==!0)return;const m=i["onUpdate:modelValue"]!==void 0;m===!0&&(s("update:modelValue",!0),u=o,w(()=>{u===o&&(u=void 0)})),(i.modelValue===null||m===!1)&&C(o)}function C(o){e.value!==!0&&(e.value=!0,s("beforeShow",o),a!==void 0?a(o):s("show",o))}function $(o){if(i.disable===!0)return;const m=i["onUpdate:modelValue"]!==void 0;m===!0&&(s("update:modelValue",!1),u=o,w(()=>{u===o&&(u=void 0)})),(i.modelValue===null||m===!1)&&E(o)}function E(o){e.value!==!1&&(e.value=!1,s("beforeHide",o),l!==void 0?l(o):s("hide",o))}function V(o){i.disable===!0&&o===!0?i["onUpdate:modelValue"]!==void 0&&s("update:modelValue",!1):o===!0!==e.value&&(o===!0?C:E)(u)}D(()=>i.modelValue,V),n!==void 0&&G(r)===!0&&D(()=>h.$route.fullPath,()=>{n.value===!0&&e.value===!0&&$()}),c===!0&&I(()=>{V(i.modelValue)});const k={show:g,hide:$,toggle:v};return Object.assign(h,k),k}let Y=1,z=document.body;function J(e,t){const n=document.createElement("div");if(n.id=t!==void 0?`q-portal--${t}--${Y++}`:e,F.globalNodes!==void 0){const a=F.globalNodes.class;a!==void 0&&(n.className=a)}return z.appendChild(n),n}function R(e){e.remove()}const P=[];function re(e){return P.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function X(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return b(e)}else if(e.__qPortal===!0){const n=b(e);return n!==void 0&&n.$options.name==="QPopupProxy"?(e.hide(t),n):e}e=b(e)}while(e!=null)}function fe(e,t,n){for(;n!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(n--,e.$options.name==="QMenu"){e=X(e,t);continue}e.hide(t)}e=b(e)}}const Z=K({name:"QPortal",setup(e,{slots:t}){return()=>t.default()}});function x(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function de(e,t,n,a){const l=M(!1),c=M(!1);let r=null;const i={},s=a==="dialog"&&x(e);function h(v){if(v===!0){q(i),c.value=!0;return}c.value=!1,l.value===!1&&(s===!1&&r===null&&(r=J(!1,a)),l.value=!0,P.push(e.proxy),W(i))}function u(v){if(c.value=!1,v!==!0)return;q(i),l.value=!1;const g=P.indexOf(e.proxy);g!==-1&&P.splice(g,1),r!==null&&(R(r),r=null)}return L(()=>{u(!0)}),e.proxy.__qPortal=!0,O(e.proxy,"contentEl",()=>t.value),{showPortal:h,hidePortal:u,portalIsActive:l,portalIsAccessible:c,renderPortal:()=>s===!0?n():l.value===!0?[y(j,{to:r},y(Z,n))]:void 0}}const ce={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function me(e,t=()=>{},n=()=>{}){return{transitionProps:Q(()=>{const a=`q-transition--${e.transitionShow||t()}`,l=`q-transition--${e.transitionHide||n()}`;return{appear:!0,enterFromClass:`${a}-enter-from`,enterActiveClass:`${a}-enter-active`,enterToClass:`${a}-enter-to`,leaveFromClass:`${l}-leave-from`,leaveActiveClass:`${l}-leave-active`,leaveToClass:`${l}-leave-to`}}),transitionStyle:Q(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}function pe(){let e;const t=T();function n(){e=void 0}return S(n),_(n),{removeTick:n,registerTick(a){e=a,w(()=>{e===a&&(N(t)===!1&&e(),e=void 0)})}}}function ve(){let e=null;const t=T();function n(){e!==null&&(clearTimeout(e),e=null)}return S(n),_(n),{removeTimeout:n,registerTimeout(a,l){n(),N(t)===!1&&(e=setTimeout(()=>{e=null,a()},l))}}}const f=[];let p;function ee(e){p=e.keyCode===27}function te(){p===!0&&(p=!1)}function ne(e){p===!0&&(p=!1,B(e,27)===!0&&f[f.length-1](e))}function H(e){window[e]("keydown",ee),window[e]("blur",te),window[e]("keyup",ne),p=!1}function ge(e){A.is.desktop===!0&&(f.push(e),f.length===1&&H("addEventListener"))}function he(e){const t=f.indexOf(e);t!==-1&&(f.splice(t,1),f.length===0&&H("removeEventListener"))}const d=[];function U(e){d[d.length-1](e)}function be(e){A.is.desktop===!0&&(d.push(e),d.length===1&&document.body.addEventListener("focusin",U))}function Pe(e){const t=d.indexOf(e);t!==-1&&(d.splice(t,1),d.length===0&&document.body.removeEventListener("focusin",U))}export{ce as a,se as b,pe as c,ve as d,me as e,ue as f,de as g,be as h,he as i,ge as j,X as k,re as l,fe as m,P as p,Pe as r,ie as u};
